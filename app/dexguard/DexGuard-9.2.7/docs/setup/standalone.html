



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for the DexGuard tool">
      
      
      
        <meta name="author" content="Guardsquare">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.3">
    
    
      
        <title>DexGuard - DexGuard</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=:300,400,400i,700%7C&display=fallback">
        <style>body,input{font-family:"","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
      <link rel="stylesheet" href="../css/extra2.css">
    
      <link rel="stylesheet" href="../css/tabs.css">
    
    
      
    
    
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NMXSB9');</script>
<!-- End Google Tag Manager -->


  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#basic-configuration" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NMXSB9"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
   
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../index.html" title="DexGuard" aria-label="DexGuard" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../img/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            DexGuard
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    

    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../index.html" title="DexGuard" class="md-nav__button md-logo">
      
        <img alt="logo" src="../img/logo.png" width="48" height="48">
      
    </a>
    DexGuard
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../index.html" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../quickstart.html" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../introduction.html" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Setup
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Setup
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        DexGuard
      </label>
    
    <a href="standalone.html" title="DexGuard" class="md-nav__link md-nav__link--active">
      DexGuard
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basic-configuration" class="md-nav__link">
    Basic configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-binary-to-process" class="md-nav__link">
    The binary to process
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#name-and-location-of-the-output-file" class="md-nav__link">
    Name and location of the output file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-default-configuration-to-use" class="md-nav__link">
    The default configuration to use
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-compile-only-dependencies" class="md-nav__link">
    The compile-only dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-of-a-typical-setup" class="md-nav__link">
    Example of a typical setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-file" class="md-nav__link">
    Configuration file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consumer-rules" class="md-nav__link">
    Consumer rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#android-sdk-libraries" class="md-nav__link">
    Android SDK libraries
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mapping-files" class="md-nav__link">
    Mapping files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signing-configuration" class="md-nav__link">
    Signing configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#default-debug-keystore" class="md-nav__link">
    Default debug keystore
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="upgrading.html" title="Upgrading" class="md-nav__link">
      Upgrading
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="gradle-plugin.html" title="Gradle Plugin" class="md-nav__link">
      Gradle Plugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="repository.html" title="Maven repository" class="md-nav__link">
      Maven repository
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="espresso.html" title="Espresso" class="md-nav__link">
      Espresso
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="cordovaplugin.html" title="Cordova Plugin" class="md-nav__link">
      Cordova Plugin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Configuration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../usage.html" title="Reference Guide" class="md-nav__link">
      Reference Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../defaultconfigurations.html" title="Default Configs" class="md-nav__link">
      Default Configs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../annotations.html" title="Annotations" class="md-nav__link">
      Annotations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Features
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Features
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../protection.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rasp.html" title="RASP" class="md-nav__link">
      RASP
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Languages & Platforms
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Languages & Platforms
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../java.html" title="Java" class="md-nav__link">
      Java
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../kotlin.html" title="Kotlin" class="md-nav__link">
      Kotlin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../javascript.html" title="JavaScript" class="md-nav__link">
      JavaScript
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      ThreatCast
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        ThreatCast
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../threatcast.html" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      In Depth
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        In Depth
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../protectionreport.html" title="Protection Report" class="md-nav__link">
      Protection Report
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples.html" title="Examples" class="md-nav__link">
      Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../refcard.html" title="Reference Card" class="md-nav__link">
      Reference Card
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../optimizations.html" title="Optimizations" class="md-nav__link">
      Optimizations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../attributes.html" title="Attributes" class="md-nav__link">
      Attributes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../loggingremoval.html" title="Logging Removal" class="md-nav__link">
      Logging Removal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../verification.html" title="Verification" class="md-nav__link">
      Verification
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../runtime.html" title="Runtime Library" class="md-nav__link">
      Runtime Library
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../plugins.html" title="Encryption Plugins" class="md-nav__link">
      Encryption Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../codepush.html" title="Code Push" class="md-nav__link">
      Code Push
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Addons
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Addons
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../addons_overview.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ndk.html" title="NDK" class="md-nav__link">
      NDK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../whitebox.html" title="Whitebox Cryptography" class="md-nav__link">
      Whitebox Cryptography
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fingerprinting.html" title="Device Fingerprinting" class="md-nav__link">
      Device Fingerprinting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../securekeyboard.html" title="Secure Keyboard" class="md-nav__link">
      Secure Keyboard
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../tools/androidstudio.html" title="Android Studio Plugin" class="md-nav__link">
      Android Studio Plugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tools/libraryrulesgenerator.html" title="Library Rules Generator" class="md-nav__link">
      Library Rules Generator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tools/retrace.html" title="ReTrace" class="md-nav__link">
      ReTrace
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Troubleshooting
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Troubleshooting
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../troubleshooting.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../reportingissues.html" title="Reporting Issues" class="md-nav__link">
      Reporting Issues
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../releasenotes.html" title="Release Notes" class="md-nav__link">
      Release Notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../license.html" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#basic-configuration" class="md-nav__link">
    Basic configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-binary-to-process" class="md-nav__link">
    The binary to process
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#name-and-location-of-the-output-file" class="md-nav__link">
    Name and location of the output file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-default-configuration-to-use" class="md-nav__link">
    The default configuration to use
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-compile-only-dependencies" class="md-nav__link">
    The compile-only dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-of-a-typical-setup" class="md-nav__link">
    Example of a typical setup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-file" class="md-nav__link">
    Configuration file
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consumer-rules" class="md-nav__link">
    Consumer rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#android-sdk-libraries" class="md-nav__link">
    Android SDK libraries
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mapping-files" class="md-nav__link">
    Mapping files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#signing-configuration" class="md-nav__link">
    Signing configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#default-debug-keystore" class="md-nav__link">
    Default debug keystore
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>DexGuard</h1>
                
                <div class="admonition warning">
<p class="admonition-title">Runtime-invisible annotations</p>
<p>By default D8/R8 strips runtime-invisible annotations when building release
configurations. If you rely on these annotations being visible to DexGuard,
please visit <strong><a href="../troubleshooting.html#preserveruntimeinvisibleannotations">this page</a></strong> 
for a workaround.</p>
</div>
<p>DexGuard is a command line tool for processing Android applications (<code>.apk</code>, <code>.aab</code>)
and libraries (<code>.aar</code>). The tool can be invoked as shown below:</p>
<div class="tabbed-set" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">Linux/macOS</label><div class="tabbed-content">
<div class="codehilite"><pre><span></span><code>bin/dexguard.sh &lt;options&gt; ...
</code></pre></div>

</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">Windows</label><div class="tabbed-content">
<div class="codehilite"><pre><span></span><code>bin\dexguard <span class="p">&lt;</span>options<span class="p">&gt;</span> ...
</code></pre></div>

</div>
</div>
<p>Typically, most of the options you pass to DexGuard will be put in a separate
configuration file, <code>dexguard-configuration.pro</code> for example. You can then
invoke DexGuard with this configuration file using the <code>include</code> option:</p>
<div class="tabbed-set" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">Linux/macOS</label><div class="tabbed-content">
<div class="codehilite"><pre><span></span><code>bin/dexguard.sh -include dexguard-configuration.pro
</code></pre></div>

</div>
<input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><label for="__tabbed_2_2">Windows</label><div class="tabbed-content">
<div class="codehilite"><pre><span></span><code>bin\dexguard -include dexguard-configuration.pro
</code></pre></div>

</div>
</div>
<p>You don't have to put all of your options in the file when you call DexGuard
like this, and you can also specify multiple files if you like.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When including files on the command line, you can use the <code>@</code> symbol instead of <code>-include</code> as a shorthand:</p>
<div class="tabbed-set" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">Linux/macOS</label><div class="tabbed-content">
<div class="codehilite"><pre><span></span><code>bin/dexguard.sh @dexguard-configuration.pro
</code></pre></div>

</div>
<input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><label for="__tabbed_3_2">Windows</label><div class="tabbed-content">
<div class="codehilite"><pre><span></span><code>bin\dexguard @dexguard-configuration.pro
</code></pre></div>

</div>
</div>
</div>
<h2 id="basic-configuration">Basic configuration<a class="headerlink" href="#basic-configuration" title="Permanent link">&para;</a></h2>
<p>The basic configuration required for DexGuard to run properly consists of the
following:</p>
<ul>
<li>The binary to process (<code>.apk</code>, <code>.aab</code> or <code>.aar</code>).</li>
<li>Name and location of the output file.</li>
<li>The <a href="../defaultconfigurations.html">default configuration</a> to use.</li>
<li>The compile-only dependencies.</li>
</ul>
<h3 id="the-binary-to-process">The binary to process<a class="headerlink" href="#the-binary-to-process" title="Permanent link">&para;</a></h3>
<p>You have to pass in the file you want DexGuard to process using the <code>injars</code>
option. The file types currently supported by DexGuard are:</p>
<ul>
<li>Android application (<code>.apk</code>, <code>.aab</code>)</li>
<li>Android library (<code>.aar</code>)</li>
</ul>
<p>Example:
<div class="codehilite"><pre><span></span><code><span class="nb">-injars </span><span class="err">path/to/my-application.apk</span>
</code></pre></div></p>
<h3 id="name-and-location-of-the-output-file">Name and location of the output file<a class="headerlink" href="#name-and-location-of-the-output-file" title="Permanent link">&para;</a></h3>
<p>This will tell DexGuard where to output the obfuscated result and how to name
it. The <code>outjars</code> option is used for this purpose.</p>
<p>Example:
<div class="codehilite"><pre><span></span><code><span class="nb">-outjars </span><span class="err">path/to/output-application.apk</span>
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>DexGuard will not create the child directories of the output file. Make
sure the directories exist <strong>before</strong> executing DexGuard as these missing
directories are considered an error.</p>
</div>
<h3 id="the-default-configuration-to-use">The default configuration to use<a class="headerlink" href="#the-default-configuration-to-use" title="Permanent link">&para;</a></h3>
<p>DexGuard includes several default configurations that contain rules to
configure DexGuard to process a particular type of input. It also contains
rules for well known and popular libraries. A full list of available default
configurations and a description for each of them can be found on the
<a href="../defaultconfigurations.html">default configurations page</a>.</p>
<p>The default configurations are packaged inside DexGuard and can be referred to
by prefixing their name with <code>/lib/</code>. For example, if you want to refer to the
<code>dexguard-release.pro</code> default configuration you would use
<code>/lib/dexguard-release.pro</code>.</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">-include </span><span class="err">/lib/dexguard-release.pro</span>
</code></pre></div>

<p>The include option can also be used inside a configuration file.</p>
<h3 id="the-compile-only-dependencies">The compile-only dependencies<a class="headerlink" href="#the-compile-only-dependencies" title="Permanent link">&para;</a></h3>
<p>Not all of the application or library dependencies end up in the final binary.
These dependencies are necessary for DexGuard to reason about the code and
should be supplied to ensure the best possible obfuscation. For application
projects (<code>.apk</code>, <code>.aab</code>) these are APIs that are expected to be on the target
device, like the Android standard libraries. For library projects (<code>.aar</code>)
these are almost all dependencies, except for local jar dependencies.</p>
<p>The option used to pass these on to DexGuard is the <code>libraryjars</code> option:</p>
<p>Example:
<div class="codehilite"><pre><span></span><code><span class="nb">-libraryjars </span><span class="err">path/to/android/sdk/platforms/android-XX/android.jar</span>
</code></pre></div></p>
<h3 id="example-of-a-typical-setup">Example of a typical setup<a class="headerlink" href="#example-of-a-typical-setup" title="Permanent link">&para;</a></h3>
<p>A typical setup will look something like this:</p>
<div class="tabbed-set" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><label for="__tabbed_4_1">Application</label><div class="tabbed-content">
<div class="codehilite"><pre><span></span><code><span class="nb">-injars </span><span class="err">path/to/my-application.apk</span>
<span class="nb">-outjars </span><span class="err">path/to/obfuscated-application.apk</span>

<span class="nb">-libraryjars </span><span class="err">path/to/android/sdk/platforms/android-XX/android.jar</span>

<span class="nb">-include </span><span class="err">/lib/dexguard-release.pro</span>

<span class="c"># My application-specific keep rules go here.</span>
<span class="o">...</span>
</code></pre></div>

</div>
<input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><label for="__tabbed_4_2">Library</label><div class="tabbed-content">
<div class="codehilite"><pre><span></span><code><span class="nb">-injars </span><span class="err">path/to/my-application.aar</span>
<span class="nb">-outjars </span><span class="err">path/to/obfuscated-application.aar</span>

<span class="nb">-libraryjars </span><span class="err">path/to/dependency1.aar</span>
<span class="o">...</span>
<span class="nb">-libraryjars </span><span class="err">path/to/dependencyN.jar</span>
<span class="nb">-libraryjars </span><span class="err">path/to/android/sdk/platforms/android-XX/android.jar</span>

<span class="nb">-include </span><span class="err">/lib/dexguard-library-release.pro</span>

<span class="c"># My application-specific keep rules go here.</span>
<span class="o">...</span>
</code></pre></div>

</div>
</div>
<p>This allows you to call DexGuard like so:</p>
<div class="tabbed-set" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><label for="__tabbed_5_1">Linux/macOS</label><div class="tabbed-content">
<div class="codehilite"><pre><span></span><code>bin/dexguard.sh -include dexguard-configuration.pro
</code></pre></div>

</div>
<input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><label for="__tabbed_5_2">Windows</label><div class="tabbed-content">
<div class="codehilite"><pre><span></span><code>bin\dexguard -include dexguard-configuration.pro
</code></pre></div>

</div>
</div>
<p>This has all of your configuration neatly stored together. You can then add any
project-specific rules you need, either in the same file or in another
file using the <code>-include</code> option.</p>
<h2 id="configuration-file">Configuration file<a class="headerlink" href="#configuration-file" title="Permanent link">&para;</a></h2>
<p>The DexGuard configuration file format is a text file with a list of DexGuard command line options in it. Options can contain filters to whitelist or blacklist certain names/files/classes/packages from being processed by DexGuard. For a full list and detailed explanation of all the options, take a look at the <a href="../usage.html">reference guide</a>.</p>
<p>The format supports comments. A comment starts with a <code>#</code> symbol and continues
until the end of the line.</p>
<p>Extra whitespace between words and delimiters is ignored. File names with
spaces or special characters should be quoted with single or double quotes.</p>
<p>The order of the options is generally irrelevant. However, do note specifying
the same option multiple times will concatenate the passed parameters. Changing
the order of these options will also change the resulting list as a
consequence.</p>
<p>For example, the following rules</p>
<div class="codehilite"><pre><span></span><code><span class="nb">-keepresourcefiles </span><span class="err">!lib/*/libsecret.so</span>
<span class="nb">-keepresourcefiles </span><span class="err">lib/*/lib*.so</span>
</code></pre></div>

<p>are equivalant to</p>
<div class="codehilite"><pre><span></span><code><span class="nb">-keepresourcefiles </span><span class="err">!lib/*/libsecret.so,lib/*/lib*.so</span>
</code></pre></div>

<p>This rule will keep all native libraries, except for <code>libsecret.so</code>. If you
were to flip the order of the rules, they would be equivalant to</p>
<div class="codehilite"><pre><span></span><code><span class="nb">-keepresourcefiles </span><span class="err">lib/*/lib*.so,!lib/*/libsecret.so</span>
</code></pre></div>

<p>which keeps all native libraries, <strong>including</strong> <code>libsecret.so</code>.</p>
<h2 id="consumer-rules">Consumer rules<a class="headerlink" href="#consumer-rules" title="Permanent link">&para;</a></h2>
<p>Some libraries come with so called 'ProGuard consumer rules'. These are rules
necessary for the library to continue working properly after processing it with
ProGuard and, by extension, DexGuard as well. It is advised you check the
dependencies of your application for these rules and apply them. These rules
are only relevant for applications (<code>.apk</code>, <code>.aab</code>), not for libraries
(<code>.aar</code>).</p>
<h2 id="android-sdk-libraries">Android SDK libraries<a class="headerlink" href="#android-sdk-libraries" title="Permanent link">&para;</a></h2>
<p>The Android SDK contains the Android standard API which can be used by your application or
library - this is <code>android.jar</code>. You should add this library as a dependency in your
DexGuard configuration:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">-libraryjars </span><span class="err">path/to/android/sdk/platforms/android-XX/android.jar</span>
</code></pre></div>

<p>Some other dependencies might also be provided by the Android SDK, such as the legacy Apache HTTP library (<code>org.apache.http.legacy.jar</code>).</p>
<h2 id="mapping-files">Mapping files<a class="headerlink" href="#mapping-files" title="Permanent link">&para;</a></h2>
<p>DexGuard can print out certain files containing some information on how
DexGuard affected your application or library. These files aren't printed by
default and have to be enabled with their corresponding option. Below are some
examples:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">-printmapping </span><span class="err">path/to/mapping.txt</span>
<span class="err">-</span><span class="kt">printresourcemapping</span> <span class="kt">path</span><span class="err">/</span><span class="kt">to</span><span class="err">/</span><span class="kt">resourcemapping.txt</span>
<span class="nb">-printresourcefilenamemapping </span><span class="err">path/to/resourcefilenamemapping.txt</span>
<span class="nb">-printseeds </span><span class="err">path/to/seeds.txt</span>
<span class="nb">-printusage </span><span class="err">path/to/usage.txt</span>
<span class="nb">-printresourceusage</span> <span class="kt">path</span><span class="err">/</span><span class="kt">to</span><span class="err">/</span><span class="kt">resourceusage.txt</span>
<span class="err">-</span><span class="kt">printinjectmapping</span> <span class="kt">path</span><span class="err">/</span><span class="kt">to</span><span class="err">/</span><span class="kt">injectmapping.txt</span>
<span class="nb">-printclassencryption </span><span class="err">path/to/classencryption.txt</span>
<span class="nb">-printstringencryption </span><span class="err">path/to/stringencryption.txt</span>
<span class="nb">-printassetencryption </span><span class="err">path/to/assetencryption.txt</span>
<span class="nb">-printresourceencryption </span><span class="err">path/to/resourceencryption.txt</span>
<span class="nb">-printnativelibraryencryption </span><span class="err">path/to/nativelibraryencryption.txt</span>
<span class="nb">-printmaindexlist</span> <span class="kt">path</span><span class="err">/</span><span class="kt">to</span><span class="err">/</span><span class="kt">maindexlist.txt</span>
</code></pre></div>

<p>You can read the <a href="../usage.html">reference guide</a> for more information about
these options and the files they produce.</p>
<h2 id="signing-configuration">Signing configuration<a class="headerlink" href="#signing-configuration" title="Permanent link">&para;</a></h2>
<p>DexGuard has the ability to sign your application (<code>.apk</code>, <code>.aab</code>). In order to
do so, it will need the signing configuration, which can be specified as shown
below:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">-keystore </span><span class="err">path/to/my/keystore.ks</span>
<span class="nb">-keystorepassword</span> <span class="kt">supersecretpassword</span>
<span class="nb">-keyalias</span> <span class="kt">myalias</span>
<span class="nb">-keypassword</span> <span class="kt">supersecretpassword</span>
</code></pre></div>

<p>You may not want to put this, especially the passwords, in your main
configuration file. One suggestion is to put these rules in a separate
configuration file and include it in your main configuration file.
Alternatively, if you don't want to check this file into source control or
don't want to have to create the file for each checkout, you can pass the file
to DexGuard directly:</p>
<div class="tabbed-set" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><label for="__tabbed_6_1">Linux/macOS</label><div class="tabbed-content">
<div class="codehilite"><pre><span></span><code>bin/dexguard.sh -include dexguard-configuration.pro -include signing-config.pro
</code></pre></div>

</div>
<input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><label for="__tabbed_6_2">Windows</label><div class="tabbed-content">
<div class="codehilite"><pre><span></span><code>bin\dexguard -include dexguard-configuration.pro -include signing-config.pro
</code></pre></div>

</div>
</div>
<p>You can also choose to pass in the options directly instead of putting them in
a file:</p>
<div class="tabbed-set" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><label for="__tabbed_7_1">Linux/macOS</label><div class="tabbed-content">
<div class="codehilite"><pre><span></span><code>bin/dexguard.sh -include dexguard-configuration.pro <span class="se">\</span>
                -keystore path/to/my/keystore.ks <span class="se">\</span>
                -keystorepassword supersecretpassword <span class="se">\</span>
                -keyalias myalias <span class="se">\</span>
                -keypassword supersecretpassword
</code></pre></div>

</div>
<input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><label for="__tabbed_7_2">Windows</label><div class="tabbed-content">
<div class="codehilite"><pre><span></span><code>bin\dexguard -include dexguard-configuration.pro <span class="se">^</span>
<span class="se"> </span>            -keystore path/to/my/keystore.ks <span class="se">^</span>
<span class="se"> </span>            -keystorepassword supersecretpassword <span class="se">^</span>
<span class="se"> </span>            -keyalias myalias <span class="se">^</span>
<span class="se"> </span>            -keypassword supersecretpassword
</code></pre></div>

</div>
</div>
<h3 id="default-debug-keystore">Default debug keystore<a class="headerlink" href="#default-debug-keystore" title="Permanent link">&para;</a></h3>
<p>The default debug keystore shipped with the Android SDK can be found in a
hidden generated directory called <code>.android</code> in your home folder. The file has
the name <code>debug.keystore</code>. You can use this keystore in your DexGuard signing
configuration like so:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">-keystore </span><span class="err">&lt;user.home&gt;/.android/debug.keystore</span>
<span class="nb">-keystorepassword</span> <span class="kt">android</span>
<span class="nb">-keyalias</span> <span class="kt">androiddebugkey</span>
<span class="nb">-keypassword</span> <span class="kt">android</span>
</code></pre></div>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../introduction.html" title="Introduction" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Introduction
              </span>
            </div>
          </a>
        
        
          <a href="upgrading.html" title="Upgrading" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Upgrading
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 Guardsquare
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://twitter.com/guardsquare" target="_blank" rel="noopener" title="twitter" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.linkedin.com/company/guardsquare-nv" target="_blank" rel="noopener" title="linkedin" class="md-footer-social__link fa fa-linkedin"></a>
    
      <a href="https://www.facebook.com/guardsquare" target="_blank" rel="noopener" title="facebook" class="md-footer-social__link fa fa-facebook"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>